{"remainingRequest":"/home/theinscriber/Desktop/DHISAuth/node_modules/babel-loader/lib/index.js!/home/theinscriber/Desktop/DHISAuth/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/theinscriber/Desktop/DHISAuth/src/components/DataElementGroup.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/theinscriber/Desktop/DHISAuth/src/components/DataElementGroup.vue","mtime":1536719851922},{"path":"/home/theinscriber/Desktop/DHISAuth/node_modules/cache-loader/dist/cjs.js","mtime":1536499925388},{"path":"/home/theinscriber/Desktop/DHISAuth/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/theinscriber/Desktop/DHISAuth/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport _toConsumableArray from \"/home/theinscriber/Desktop/DHISAuth/node_modules/@babel/runtime/helpers/builtin/es6/toConsumableArray\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport DataElement from '@/components/DataElement.vue';\nimport _ from 'lodash';\nexport default {\n  name: 'DataElementGroup',\n  props: ['groupName', 'groupDataElements', 'totalComparisonValue'],\n  methods: {\n    setData: function setData() {\n      var _this$dataElements, _this$dataElementValu;\n\n      this.name = this.groupName;\n\n      (_this$dataElements = this.dataElements).push.apply(_this$dataElements, _toConsumableArray(this.groupDataElements));\n\n      (_this$dataElementValu = this.dataElementValueSets).push.apply(_this$dataElementValu, _toConsumableArray(this.getDataValueSets()));\n    },\n    getDataValueSets: function getDataValueSets() {\n      var _this = this;\n\n      var dataValueSets = JSON.parse(sessionStorage.getItem('dataValues'));\n      return _.filter(dataValueSets, function (item) {\n        return _.includes(_.map(_this.dataElements, 'id'), item['dataElement']);\n      });\n    },\n    updateDataElementGroupValueSet: function updateDataElementGroupValueSet(newDataSet) {\n      var valueSets = this.dataElementValueSets;\n      this.dataElementValueSets = _.map(valueSets, function (dataSet) {\n        if (dataSet.dataElement === newDataSet.dataElement) return newDataSet;\n        return {\n          dataElement: dataSet.dataElement,\n          value: dataSet.value\n        };\n      });\n    },\n    calculateTotal: function calculateTotal() {\n      var sum = 0;\n\n      for (var i = 0; i < this.dataElementValueSets.length; i++) {\n        sum = sum + Number(this.dataElementValueSets[i].value);\n      }\n\n      return sum;\n    }\n  },\n  data: function data() {\n    return {\n      name: \"\",\n      dataElements: [],\n      dataElementValueSets: [],\n      total: 0\n    };\n  },\n  mounted: function mounted() {\n    this.setData();\n  },\n  components: {\n    DataElement: DataElement\n  },\n  computed: {\n    isValidTotal: function isValidTotal() {\n      return this.totalComparisonValue === this.total;\n    }\n  },\n  watch: {\n    groupName: function groupName(value) {\n      this.name = value;\n    },\n    groupDataElements: function groupDataElements(value) {\n      var _this$dataElements2;\n\n      (_this$dataElements2 = this.dataElements).push.apply(_this$dataElements2, _toConsumableArray(value));\n    },\n    dataElementValueSets: function dataElementValueSets() {\n      this.total = this.calculateTotal();\n    }\n  }\n};",{"version":3,"sources":["DataElementGroup.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA,OAAA,WAAA,MAAA,8BAAA;AACA,OAAA,CAAA,MAAA,QAAA;AAEA,eAAA;AACA,QAAA,kBADA;AAEA,SAAA,CAAA,WAAA,EAAA,mBAAA,EAAA,sBAAA,CAFA;AAGA,WAAA;AACA,aAAA,mBACA;AAAA;;AACA,WAAA,IAAA,GAAA,KAAA,SAAA;;AACA,iCAAA,YAAA,EAAA,IAAA,8CAAA,KAAA,iBAAA;;AACA,oCAAA,oBAAA,EAAA,IAAA,iDAAA,KAAA,gBAAA,EAAA;AACA,KANA;AAOA,sBAAA,4BACA;AAAA;;AACA,UAAA,gBAAA,KAAA,KAAA,CAAA,eAAA,OAAA,CAAA,YAAA,CAAA,CAAA;AAEA,aAAA,EAAA,MAAA,CAAA,aAAA,EAAA,UAAA,IAAA,EAAA;AACA,eAAA,EAAA,QAAA,CAAA,EAAA,GAAA,CAAA,MAAA,YAAA,EAAA,IAAA,CAAA,EAAA,KAAA,aAAA,CAAA,CAAA;AACA,OAFA,CAAA;AAGA,KAdA;AAeA,oCAAA,wCAAA,UAAA,EACA;AACA,UAAA,YAAA,KAAA,oBAAA;AAEA,WAAA,oBAAA,GAAA,EAAA,GAAA,CAAA,SAAA,EAAA,UAAA,OAAA,EAAA;AACA,YAAA,QAAA,WAAA,KAAA,WAAA,WAAA,EACA,OAAA,UAAA;AACA,eAAA;AAAA,uBAAA,QAAA,WAAA;AAAA,iBAAA,QAAA;AAAA,SAAA;AACA,OAJA,CAAA;AAKA,KAxBA;AAyBA,oBAAA,0BACA;AACA,UAAA,MAAA,CAAA;;AACA,WAAA,IAAA,IAAA,CAAA,EAAA,IAAA,KAAA,oBAAA,CAAA,MAAA,EAAA,GAAA,EACA;AACA,cAAA,MAAA,OAAA,KAAA,oBAAA,CAAA,CAAA,EAAA,KAAA,CAAA;AACA;;AAEA,aAAA,GAAA;AACA;AAlCA,GAHA;AAuCA,QAAA,gBAAA;AACA,WAAA;AACA,YAAA,EADA;AAEA,oBAAA,EAFA;AAGA,4BAAA,EAHA;AAIA,aAAA;AAJA,KAAA;AAMA,GA9CA;AA+CA,SA/CA,qBAgDA;AACA,SAAA,OAAA;AACA,GAlDA;AAmDA,cAAA;AACA;AADA,GAnDA;AAsDA,YAAA;AACA,kBAAA,wBACA;AACA,aAAA,KAAA,oBAAA,KAAA,KAAA,KAAA;AACA;AAJA,GAtDA;AA4DA,SAAA;AACA,eAAA,mBAAA,KAAA,EACA;AACA,WAAA,IAAA,GAAA,KAAA;AACA,KAJA;AAKA,uBAAA,2BAAA,KAAA,EACA;AAAA;;AACA,kCAAA,YAAA,EAAA,IAAA,+CAAA,KAAA;AACA,KARA;AASA,0BAAA,gCACA;AACA,WAAA,KAAA,GAAA,KAAA,cAAA,EAAA;AACA;AAZA;AA5DA,CAAA","sourcesContent":["<template>\n    <div>\n        <div class=\"shadow-md hover:shadow-lg border border-teal-light rounded py-4 my-4\">\n            <h2 class=\"my-3 mx-3 font-medium\">\n                {{name}}\n            </h2>\n            <DataElement\n                    class=\"px-5\"\n                    v-for=\"(dataElement, index) in dataElements\"\n                    v-bind:DEId=\"dataElement.id\"\n                    v-bind:DEFormName = \"dataElement.formName\"\n                    v-bind:DEDisplayName = \"dataElement.displayName\"\n                    v-bind:index=\"index\"\n                    v-bind:key=\"dataElement.id\"\n                    v-on:emitDataValue=\"updateDataElementGroupValueSet\"\n            ></DataElement>\n            <div class=\"border border-grey my-2\"></div>\n            <div class=\"row px-4 py-1\">\n                <div class=\"col\">\n                   <h3>Total</h3>\n                </div>\n                <div class=\"col-3\">\n                   <span v-if=\"isValidTotal\" class=\"text-green font-bold\">Valid!</span>\n                   <span v-if=\"!isValidTotal\" class=\"text-red font-bold\">Invalid</span>\n                </div>\n                <div class=\"col-3\">\n                    {{total}}\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n\n    import DataElement from '@/components/DataElement.vue'\n    import _ from 'lodash'\n\n    export default {\n        name: 'DataElementGroup',\n        props: [ 'groupName', 'groupDataElements', 'totalComparisonValue'],\n        methods : {\n          setData : function ()\n          {\n            this.name = this.groupName;\n            this.dataElements.push(...this.groupDataElements);\n            this.dataElementValueSets.push(...this.getDataValueSets())\n          },\n            getDataValueSets : function ()\n            {\n                let dataValueSets =  JSON.parse(sessionStorage.getItem('dataValues'));\n\n                return _.filter(dataValueSets, (item) => {\n                    return _.includes(_.map(this.dataElements, 'id'), item['dataElement']);\n                });\n            },\n            updateDataElementGroupValueSet : function (newDataSet)\n            {\n                var valueSets = this.dataElementValueSets;\n\n                this.dataElementValueSets = _.map(valueSets, function(dataSet) {\n                    if (dataSet.dataElement === newDataSet.dataElement)\n                        return newDataSet;\n                    return {dataElement : dataSet.dataElement, value : dataSet.value};\n                })\n            },\n            calculateTotal :  function ()\n            {\n                let sum = 0;\n                for(var i = 0; i < this.dataElementValueSets.length; i++)\n                {\n                    sum = sum+Number(this.dataElementValueSets[i].value)\n                }\n\n               return sum;\n            }\n        },\n        data: () => {\n            return {\n                name : \"\",\n                dataElements : [],\n                dataElementValueSets : [],\n                total : 0\n            }\n        },\n        mounted()\n        {\n          this.setData()\n        },\n        components : {\n            DataElement\n        },\n        computed : {\n          isValidTotal : function ()\n          {\n            return this.totalComparisonValue === this.total;\n          }\n        },\n        watch : {\n            groupName : function(value)\n            {\n                this.name = value;\n            },\n            groupDataElements : function(value)\n            {\n                this.dataElements.push(...value);\n            },\n            dataElementValueSets : function ()\n            {\n                this.total = this.calculateTotal();\n            }\n        }\n    }\n</script>\n"],"sourceRoot":"src/components"}]}